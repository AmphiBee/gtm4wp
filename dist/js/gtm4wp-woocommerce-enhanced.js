"use strict";function _readOnlyError(t){throw new TypeError('"'+t+'" is read-only')}function gtm4wp_map_eec_to_ga4(t){if(t){var e=(t.category||"").toString().split("/"),r={item_id:t.id||"",item_name:t.name||"",item_brand:t.brand||"",price:t.price||""};if(1==e.length)r.item_category=e[0];else if(1<e.length){r.item_category=e[0];for(var a=1;a<Math.min(5,e.length);a++)r["item_category"+(a+1)]=e[a]}return t.variant&&(r.item_variant=t.variant),t.list&&(r.item_list_name=t.list),t.position&&(r.index=t.position),t.quantity&&(r.quantity=t.quantity),t.coupon&&(r.coupon=t.coupon),r.google_business_vertical=gtm4wp_business_vertical,r[gtm4wp_business_vertical_id]=gtm4wp_id_prefix+r.item_id,r}}function gtm4wp_handle_cart_qty_change(){document.querySelectorAll(".product-quantity input.qty").forEach(function(t){var e,r,a=t.defaultValue,c=parseInt(t.value);a!=(c=isNaN(c)?a:c)&&(t=(t=t.closest(".cart_item"))&&t.querySelector(".remove"))&&("string"==typeof(e=t.getAttribute("data-gtm4wp_product_price"))?(e=parseFloat(e),isNaN(e)&&(e=0)):"number"!=typeof e&&(e=0),a<c?(r={name:t.getAttribute("data-gtm4wp_product_name"),id:t.getAttribute("data-gtm4wp_product_id"),price:e.toFixed(2),category:t.getAttribute("data-gtm4wp_product_cat"),variant:t.getAttribute("data-gtm4wp_product_variant"),stocklevel:t.getAttribute("data-gtm4wp_product_stocklevel"),brand:t.getAttribute("data-gtm4wp_product_brand"),quantity:c-a},window[gtm4wp_datalayer_name].push({event:"gtm4wp.addProductToCartEEC",ecommerce:{currencyCode:gtm4wp_currency,add:{products:[r]}}}),window[gtm4wp_datalayer_name].push({event:"add_to_cart",ecommerce:{currency:gtm4wp_currency,value:e.toFixed(2)*(c-a),items:[gtm4wp_map_eec_to_ga4(r)]}})):(r={name:t.getAttribute("data-gtm4wp_product_name"),id:t.getAttribute("data-gtm4wp_product_id"),price:e.toFixed(2),category:t.getAttribute("data-gtm4wp_product_cat"),variant:t.getAttribute("data-gtm4wp_product_variant"),stocklevel:t.getAttribute("data-gtm4wp_product_stocklevel"),brand:t.getAttribute("data-gtm4wp_product_brand"),quantity:a-c},window[gtm4wp_datalayer_name].push({event:"gtm4wp.removeFromCartEEC",ecommerce:{currencyCode:gtm4wp_currency,remove:{products:[r]}}}),window[gtm4wp_datalayer_name].push({event:"remove_from_cart",ecommerce:{currency:gtm4wp_currency,value:e.toFixed(2)*(a-c),items:[gtm4wp_map_eec_to_ga4(r)]}})))})}function gtm4wp_handle_payment_method_change(){var t,e;-1<gtm4wp_checkout_step_fired.indexOf("payment_method")||"complete"==document.readyState&&(t="(payment type not found)",(e=(e=document.querySelector(".payment_methods input:checked"))||document.querySelector("input[name^=payment_method]"))&&(t=e.value),window[gtm4wp_datalayer_name].push({event:"gtm4wp.checkoutStepEEC",ecommerce:{currencyCode:gtm4wp_currency,checkout:{actionField:{step:4+window.gtm4wp_checkout_step_offset+gtm4wp_shipping_payment_method_step_offset},products:window.gtm4wp_checkout_products}}}),window[gtm4wp_datalayer_name].push({event:"add_payment_info",ecommerce:{currency:gtm4wp_currency,payment_type:t,value:window.gtm4wp_checkout_value,items:window.gtm4wp_checkout_products_ga4}}),gtm4wp_checkout_step_fired.push("payment_method"))}function gtm4wp_handle_shipping_method_change(){var t,e;-1<gtm4wp_checkout_step_fired.indexOf("shipping_method")||"complete"==document.readyState&&(t="(shipping tier not found)",(e=(e=document.querySelector("input[name^=shipping_method]:checked"))||document.querySelector("input[name^=shipping_method]"))&&(t=e.value),window[gtm4wp_datalayer_name].push({event:"gtm4wp.checkoutStepEEC",ecommerce:{currencyCode:gtm4wp_currency,checkout:{actionField:{step:3+window.gtm4wp_checkout_step_offset+gtm4wp_shipping_payment_method_step_offset},products:window.gtm4wp_checkout_products}}}),window[gtm4wp_datalayer_name].push({event:"add_shipping_info",ecommerce:{currency:gtm4wp_currency,shipping_tier:t,value:window.gtm4wp_checkout_value,items:window.gtm4wp_checkout_products_ga4}}),gtm4wp_checkout_step_fired.push("shipping_method"))}function gtm4wp_process_woocommerce_pages(){window.gtm4wp_is_cart=!1,window.gtm4wp_is_checkout=!1;var t=document.querySelector("body"),o=(t&&(window.gtm4wp_is_cart=t.classList&&t.classList.contains("woocommerce-cart"),window.gtm4wp_is_checkout=t.classList&&t.classList.contains("woocommerce-checkout")),{"wp-block-handpicked-products":{displayname:"Handpicked Products",counter:1},"wp-block-product-best-sellers":{displayname:"Best Selling Products",counter:1},"wp-block-product-category":{displayname:"Product Category List",counter:1},"wp-block-product-new":{displayname:"New Products",counter:1},"wp-block-product-on-sale":{displayname:"Sale Products",counter:1},"wp-block-products-by-attribute":{displayname:"Products By Attribute",counter:1},"wp-block-product-tag":{displayname:"Products By Tag",counter:1},"wp-block-product-top-rated":{displayname:"Top Rated Products",counter:1}});if(document.querySelectorAll(".wc-block-grid .wc-block-grid__product").forEach(function(t){var e=t.closest(".wc-block-grid"),r=t.querySelector(".gtm4wp_productdata");if(e&&r){var a=e.classList;if(a)for(var c in o)a.contains(c)&&(r.setAttribute("data-gtm4wp_productlist_name",o[c].displayname),r.setAttribute("data-gtm4wp_product_listposition",o[c].counter),o[c].counter++)}}),0<document.querySelectorAll(".gtm4wp_productdata,.widget-product-item").length){var e,r,a,c=[],n=[],m=0;if(document.querySelectorAll(".gtm4wp_productdata,.widget-product-item").forEach(function(t){"string"==typeof(m=t.getAttribute("data-gtm4wp_product_price"))?(m=parseFloat(m),isNaN(m)&&(m=0)):"number"!=typeof m&&(m=0),e={name:t.getAttribute("data-gtm4wp_product_name"),id:t.getAttribute("data-gtm4wp_product_id"),price:m.toFixed(2),category:t.getAttribute("data-gtm4wp_product_cat"),position:t.getAttribute("data-gtm4wp_product_listposition"),list:t.getAttribute("data-gtm4wp_productlist_name"),stocklevel:t.getAttribute("data-gtm4wp_product_stocklevel"),brand:t.getAttribute("data-gtm4wp_product_brand")},c.push(e),n.push(gtm4wp_map_eec_to_ga4(e))}),0<gtm4wp_product_per_impression)for(;c.length;)r=c.splice(0,gtm4wp_product_per_impression),a=n.splice(0,gtm4wp_product_per_impression),window[gtm4wp_datalayer_name].push({event:"gtm4wp.productImpressionEEC",ecommerce:{currencyCode:gtm4wp_currency,impressions:r}}),window[gtm4wp_datalayer_name].push({event:"view_item_list",ecommerce:{currency:gtm4wp_currency,items:a}});else{for(var p=0;p<window[gtm4wp_datalayer_name].length;p++)if(window[gtm4wp_datalayer_name][p].ecommerce){window[gtm4wp_datalayer_name][p].ecommerce.impressions?window[gtm4wp_datalayer_name][p].ecommerce.impressions=window[gtm4wp_datalayer_name][p].ecommerce.impressions.concat(c):window[gtm4wp_datalayer_name][p].ecommerce.impressions=c;break}p==window[gtm4wp_datalayer_name].length&&(p=0,window[gtm4wp_datalayer_name][p].ecommerce={},window[gtm4wp_datalayer_name][p].ecommerce.impressions=c),window[gtm4wp_datalayer_name][p].ecommerce.currencyCode=gtm4wp_currency}}document.addEventListener("click",function(t){var e=t.target;if(!e)return!0;try{if(!e.closest(".add_to_cart_button:not(.product_type_variable, .product_type_grouped, .single_add_to_cart_button)"))return!0}catch(t){return!0}e=e.closest(".product,.wc-block-grid__product"),e=e&&e.querySelector(".gtm4wp_productdata");if(!e)return!0;var r=e.getAttribute("data-gtm4wp_product_price"),e=("string"==typeof r?(r=parseFloat(r),isNaN(r)&&(r=0)):"number"!=typeof r&&(r=0),{name:e.getAttribute("data-gtm4wp_product_name"),id:e.getAttribute("data-gtm4wp_product_id"),price:r.toFixed(2),category:e.getAttribute("data-gtm4wp_product_cat"),stocklevel:e.getAttribute("data-gtm4wp_product_stocklevel"),brand:e.getAttribute("data-gtm4wp_product_brand"),quantity:1});window[gtm4wp_datalayer_name].push({event:"gtm4wp.addProductToCartEEC",ecommerce:{currencyCode:gtm4wp_currency,add:{products:[e]}}}),window[gtm4wp_datalayer_name].push({event:"add_to_cart",ecommerce:{currency:gtm4wp_currency,value:r.toFixed(2),items:[gtm4wp_map_eec_to_ga4(e)]}})}),document.addEventListener("click",function(t){var e=t.target;if(!e)return!0;try{if(!e.closest(".single_add_to_cart_button:not(.disabled)"))return!0}catch(t){return!0}e=e.closest("form.cart");if(!e)return!0;var r=e.querySelectorAll("[name=variation_id]"),a=e.classList&&e.classList.contains("grouped_form");if(0<r.length)gtm4wp_last_selected_product_variation&&(r=e.querySelector("[name=quantity]"),gtm4wp_last_selected_product_variation.quantity=r&&r.value||1,window[gtm4wp_datalayer_name].push({event:"gtm4wp.addProductToCartEEC",ecommerce:{currencyCode:gtm4wp_currency,add:{products:[gtm4wp_last_selected_product_variation]}}}),window[gtm4wp_datalayer_name].push({event:"add_to_cart",ecommerce:{currency:gtm4wp_currency,value:gtm4wp_last_selected_product_variation.price*gtm4wp_last_selected_product_variation.quantity,items:[gtm4wp_map_eec_to_ga4(gtm4wp_last_selected_product_variation)]}}));else if(a){var r=document.querySelectorAll(".grouped_form .gtm4wp_productdata"),c=[],o=[],n=0;if(r.forEach(function(t){var e=document.querySelectorAll("input[name=quantity\\["+t.getAttribute("data-gtm4wp_product_id")+"\\]]");return!(0<e.length)||0==(product_qty=e[0]&&e[0].value||1)||(e={id:gtm4wp_use_sku_instead?t.getAttribute("data-gtm4wp_product_sku"):t.getAttribute("data-gtm4wp_product_id"),name:t.getAttribute("data-gtm4wp_product_name"),price:t.getAttribute("data-gtm4wp_product_price"),category:t.getAttribute("data-gtm4wp_product_cat"),quantity:product_qty,stocklevel:t.getAttribute("data-gtm4wp_product_stocklevel"),brand:t.getAttribute("data-gtm4wp_product_brand")},c.push(e),o.push(gtm4wp_map_eec_to_ga4(e)),void(n+=e.price*e.quantity))}),0==c.length)return!0;window[gtm4wp_datalayer_name].push({event:"gtm4wp.addProductToCartEEC",ecommerce:{currencyCode:gtm4wp_currency,add:{products:c}}}),window[gtm4wp_datalayer_name].push({event:"add_to_cart",ecommerce:{currency:gtm4wp_currency,value:n,items:o}})}else{a=gtm4wp_use_sku_instead?e.querySelector("[name=gtm4wp_sku]"):e.querySelector("[name=gtm4wp_id]"),r={id:a&&a.value,name:e.querySelector("[name=gtm4wp_name]")&&e.querySelector("[name=gtm4wp_name]").value,price:e.querySelector("[name=gtm4wp_price]")&&e.querySelector("[name=gtm4wp_price]").value,category:e.querySelector("[name=gtm4wp_category]")&&e.querySelector("[name=gtm4wp_category]").value,quantity:e.querySelector("[name=quantity]")&&e.querySelector("[name=quantity]").value,stocklevel:e.querySelector("[name=gtm4wp_stocklevel]")&&e.querySelector("[name=gtm4wp_stocklevel]").value,brand:e.querySelector("[name=gtm4wp_brand]")&&e.querySelector("[name=gtm4wp_brand]").value};window[gtm4wp_datalayer_name].push({event:"gtm4wp.addProductToCartEEC",ecommerce:{currencyCode:gtm4wp_currency,add:{products:[r]}}}),window[gtm4wp_datalayer_name].push({event:"add_to_cart",ecommerce:{currency:gtm4wp_currency,value:r.price*r.quantity,items:[gtm4wp_map_eec_to_ga4(r)]}})}}),document.addEventListener("click",function(t){var e,r,a,t=t.target;return t&&t.closest(".mini_cart_item a.remove,.product-remove a.remove"),_readOnlyError("dom_productdata"),!t||(e=0,(r=(r=t.closest(".cart_item"))&&r.querySelectorAll(".product-quantity input.qty"))&&0!==r.length?e=r[0].value:(r=(a=t.closest(".mini_cart_item"))&&a.querySelectorAll(".quantity"))&&0<r.length&&(e=parseInt(r[0].textContent),Number.isNaN(e))&&(e=0),0===e)||(a={name:t.getAttribute("data-gtm4wp_product_name"),id:t.getAttribute("data-gtm4wp_product_id"),price:t.getAttribute("data-gtm4wp_product_price"),category:t.getAttribute("data-gtm4wp_product_cat"),variant:t.getAttribute("data-gtm4wp_product_variant"),stocklevel:t.getAttribute("data-gtm4wp_product_stocklevel"),brand:t.getAttribute("data-gtm4wp_product_brand"),quantity:e},window[gtm4wp_datalayer_name].push({event:"gtm4wp.removeFromCartEEC",ecommerce:{currencyCode:gtm4wp_currency,remove:{products:[a]}}}),void window[gtm4wp_datalayer_name].push({event:"remove_from_cart",ecommerce:{currency:gtm4wp_currency,value:a.price*a.quantity,items:[gtm4wp_map_eec_to_ga4(a)]}}))});if(document.addEventListener("click",function(t){if("undefined"==typeof google_tag_manager)return!0;var e=t.target,r=e.closest(".products li:not(.product-category) a:not(.add_to_cart_button):not(.quick-view-button),.wc-block-grid__products li:not(.product-category) a:not(.add_to_cart_button):not(.quick-view-button),.products>div:not(.product-category) a:not(.add_to_cart_button):not(.quick-view-button),.widget-product-item,.woocommerce-grouped-product-list-item__label a");if(!r)return!0;var a=e.closest(".product,.wc-block-grid__product"),c=a||(a=e.closest(".products li"))||(a=e.closest(".products>div"))||(a=e.closest(".woocommerce-grouped-product-list-item__label"))?a.querySelector(".gtm4wp_productdata"):e;if(void 0===c.getAttribute("data-gtm4wp_product_id")||""==c.getAttribute("data-gtm4wp_product_id"))return!0;if(c.getAttribute("data-gtm4wp_product_url")!=r.getAttribute("href"))return!0;var o,n={id:c.getAttribute("data-gtm4wp_product_id"),name:c.getAttribute("data-gtm4wp_product_name"),price:c.getAttribute("data-gtm4wp_product_price"),category:c.getAttribute("data-gtm4wp_product_cat"),stocklevel:c.getAttribute("data-gtm4wp_product_stocklevel"),brand:c.getAttribute("data-gtm4wp_product_brand"),position:c.getAttribute("data-gtm4wp_product_listposition")};for(o in window.google_tag_manager)if("gtm-"==o.substring(0,4).toLowerCase()){window.gtm4wp_first_container_id=o;break}if(""===window.gtm4wp_first_container_id)return!0;var m=t.ctrlKey||t.metaKey;t.preventDefault(),m&&(window.productpage_window=window.open("about:blank","_blank")),window[gtm4wp_datalayer_name].push({event:"gtm4wp.productClickEEC",ecommerce:{currencyCode:gtm4wp_currency,click:{actionField:{list:c.getAttribute("data-gtm4wp_productlist_name")},products:[n]}},eventCallback:function(t){if(void 0!==t&&window.gtm4wp_first_container_id!=t)return!0;window[gtm4wp_datalayer_name].push({event:"select_item",ecommerce:{currency:gtm4wp_currency,items:[gtm4wp_map_eec_to_ga4(n)]},eventCallback:function(t){if(void 0!==t&&window.gtm4wp_first_container_id!=t)return!0;m&&productpage_window?productpage_window.location.href=c.getAttribute("data-gtm4wp_product_url"):document.location.href=c.getAttribute("data-gtm4wp_product_url")},eventTimeout:2e3})},eventTimeout:2e3})}),jQuery(document).on("found_variation",function(t,e){if(void 0!==e&&("interactive"!==document.readyState||!gtm4wp_changedetail_fired_during_pageload)){var r,t=t.target,a=(t.querySelector("[name=variation_id]")&&t.querySelector("[name=variation_id]").value,t.querySelector("[name=gtm4wp_id]")&&t.querySelector("[name=gtm4wp_id]").value,t.querySelector("[name=gtm4wp_name]")&&t.querySelector("[name=gtm4wp_name]").value),c=(t.querySelector("[name=gtm4wp_sku]")&&t.querySelector("[name=gtm4wp_sku]").value,t.querySelector("[name=gtm4wp_category]")&&t.querySelector("[name=gtm4wp_category]").value),a=(t.querySelector("[name=gtm4wp_price]")&&t.querySelector("[name=gtm4wp_price]").value,{name:a,id:0,price:0,category:c,stocklevel:t.querySelector("[name=gtm4wp_stocklevel]")&&t.querySelector("[name=gtm4wp_stocklevel]").value,brand:t.querySelector("[name=gtm4wp_brand]")&&t.querySelector("[name=gtm4wp_brand]").value,variant:""}),o=(a.id=e.variation_id,gtm4wp_use_sku_instead&&e.sku&&""!==e.sku&&(a.id=e.sku),a.price=e.display_price,[]);for(r in e.attributes)o.push(e.attributes[r]);a.variant=o.join(","),gtm4wp_last_selected_product_variation=a,window[gtm4wp_datalayer_name].push({event:"gtm4wp.changeDetailViewEEC",ecommerce:{currencyCode:gtm4wp_currency,detail:{products:[a]}},ecomm_prodid:gtm4wp_id_prefix+a.id,ecomm_pagetype:"product",ecomm_totalvalue:a.price}),window[gtm4wp_datalayer_name].push({event:"view_item",ecommerce:{currency:gtm4wp_currency,value:a.price,items:[gtm4wp_map_eec_to_ga4(a)]}}),"interactive"===document.readyState&&(gtm4wp_changedetail_fired_during_pageload=!0)}}),jQuery(".variations select").trigger("change"),jQuery(document).ajaxSuccess(function(t,e,r){void 0!==r&&-1<r.url.indexOf("wc-api=WC_Quick_View")&&setTimeout(function(){var t=document.querySelector("#gtm4wp_quickview_data");if(t&&t.dataset&&t.dataset.gtm4wp_datalayer)try{var e=JSON.parse(t.dataset.gtm4wp_datalayer);e&&window.dataLayer&&window.dataLayer.push(e)}catch(t){console&&console.error&&console.error(t.message)}},500)}),gtm4wp_is_cart&&(document.addEventListener("click",function(t){t=t.target;return!t||!t.closest("[name=update_cart]")||void gtm4wp_handle_cart_qty_change()}),document.addEventListener("keypress",function(t){t=t.target;return!t||!t.closest(".woocommerce-cart-form input[type=number]")||void gtm4wp_handle_cart_qty_change()})),gtm4wp_is_checkout&&(window.gtm4wp_checkout_step_offset=window.gtm4wp_checkout_step_offset||0,window.gtm4wp_checkout_value=window.gtm4wp_checkout_value||0,window.gtm4wp_checkout_products=window.gtm4wp_checkout_products||[],window.gtm4wp_checkout_products_ga4=window.gtm4wp_checkout_products_ga4||[],document.addEventListener("focusout",function(t){t=t.target;return!t||!t.closest||!t.closest("input[name^=shipping_]:not(input[name^=shipping_method])")||void(-1<gtm4wp_checkout_step_fired.indexOf("shipping")||""!=t.value.trim()&&(window[gtm4wp_datalayer_name].push({event:"gtm4wp.checkoutStepEEC",ecommerce:{currencyCode:gtm4wp_currency,checkout:{actionField:{step:2+window.gtm4wp_checkout_step_offset},products:window.gtm4wp_checkout_products}}}),gtm4wp_checkout_step_fired.push("shipping")))}),document.addEventListener("change",function(t){t=t.target;return!t||!t.closest("input[name^=shipping_method]")||void gtm4wp_handle_shipping_method_change()}),document.addEventListener("change",function(t){t=t.target;return!t||!t.closest("input[name=payment_method]")||void gtm4wp_handle_payment_method_change()}),document.addEventListener("submit",function(t){t=t.target;if(!t)return!0;if(!t.closest("form[name=checkout]"))return!0;-1==gtm4wp_checkout_step_fired.indexOf("shipping_method")&&gtm4wp_handle_shipping_method_change(),-1==gtm4wp_checkout_step_fired.indexOf("payment_method")&&gtm4wp_handle_payment_method_change();t=document.querySelector("input[name^=shipping_method]:checked"),(t=t||document.querySelector("input[name^=shipping_method]"))&&window[gtm4wp_datalayer_name].push({event:"gtm4wp.checkoutOptionEEC",ecommerce:{checkout_option:{actionField:{step:3+window.gtm4wp_checkout_step_offset+gtm4wp_shipping_payment_method_step_offset,option:"Shipping: "+t.value}}}}),t=document.querySelector(".payment_methods input:checked");(t=t||document.querySelector("input[name^=payment_method]"))&&window[gtm4wp_datalayer_name].push({event:"gtm4wp.checkoutOptionEEC",ecommerce:{checkout_option:{actionField:{step:4+window.gtm4wp_checkout_step_offset+gtm4wp_shipping_payment_method_step_offset,option:"Payment: "+t.value}}}})})),window.gtm4wp_remarketing&&!gtm4wp_is_cart&&!gtm4wp_is_checkout&&0<jQuery(".gtm4wp_productdata").length){for(var i,p=0;p<window[gtm4wp_datalayer_name].length&&!window[gtm4wp_datalayer_name][p].ecomm_prodid;p++);p==window[gtm4wp_datalayer_name].length&&(p=0,window[gtm4wp_datalayer_name][p].ecomm_prodid=[]),void 0!==window[gtm4wp_datalayer_name][p].ecomm_prodid.push&&jQuery(".gtm4wp_productdata").each(function(){i=jQuery(this),window[gtm4wp_datalayer_name][p].ecomm_prodid.push(gtm4wp_id_prefix+i.data("gtm4wp_product_id"))})}window[gtm4wp_datalayer_name]&&window[gtm4wp_datalayer_name].forEach&&window[gtm4wp_datalayer_name].forEach(function(t){var e,r,a,c,o,n,m,p;t&&t.ecommerce&&t.ecommerce.detail&&window[gtm4wp_datalayer_name].push({event:"view_item",ecommerce:{currency:gtm4wp_currency,value:t.ecommerce.detail.products[0].price,items:[gtm4wp_map_eec_to_ga4(t.ecommerce.detail.products[0])]}}),t&&t.ecommerce&&(t.ecommerce.cart||t.ecommerce.checkout&&gtm4wp_is_cart)&&(e=t.ecommerce.cart||t.ecommerce.checkout.products,r=[],a=0,e.forEach(function(t){r.push(gtm4wp_map_eec_to_ga4(t)),a+=t.price*t.quantity}),window[gtm4wp_datalayer_name].push({event:"view_cart",ecommerce:{currency:gtm4wp_currency,value:a.toFixed(2),items:r}})),t&&t.ecommerce&&t.ecommerce.checkout&&!gtm4wp_is_cart&&(c=[],o=0,t.ecommerce.checkout.products.forEach(function(t){c.push(gtm4wp_map_eec_to_ga4(t)),o+=t.price*t.quantity}),window[gtm4wp_datalayer_name].push({event:"begin_checkout",ecommerce:{currency:gtm4wp_currency,value:o,items:c}})),t&&t.ecommerce&&t.ecommerce.add&&(n=[],m=0,t.ecommerce.add.products.forEach(function(t){n.push(gtm4wp_map_eec_to_ga4(t)),m+=t.price*t.quantity}),window[gtm4wp_datalayer_name].push({event:"add_to_cart",ecommerce:{currency:gtm4wp_currency,value:m,items:n}})),t&&t.ecommerce&&t.ecommerce.purchase&&(p=[],t.ecommerce.purchase.products.forEach(function(t){p.push(gtm4wp_map_eec_to_ga4(t))}),window[gtm4wp_datalayer_name].push({event:"purchase",ecommerce:{currency:gtm4wp_currency,items:p,transaction_id:t.ecommerce.purchase.actionField.id,affiliation:t.ecommerce.purchase.actionField.affiliation,value:t.ecommerce.purchase.actionField.revenue,tax:t.ecommerce.purchase.actionField.tax,shipping:t.ecommerce.purchase.actionField.shipping,coupon:t.ecommerce.purchase.actionField.coupon}}))})}function gtm4wp_page_loading_completed(){document.removeEventListener("DOMContentLoaded",gtm4wp_page_loading_completed),window.removeEventListener("load",gtm4wp_page_loading_completed),gtm4wp_process_woocommerce_pages()}window.gtm4wp_last_selected_product_variation,window.gtm4wp_changedetail_fired_during_pageload=!1,window.gtm4wp_is_cart=!1,window.gtm4wp_is_checkout=!1,window.gtm4wp_checkout_step_fired=[],window.gtm4wp_shipping_payment_method_step_offset=gtm4wp_needs_shipping_address?0:-1,window.gtm4wp_first_container_id="","loading"!==document.readyState?window.setTimeout(gtm4wp_process_woocommerce_pages):(document.addEventListener("DOMContentLoaded",gtm4wp_page_loading_completed),window.addEventListener("load",gtm4wp_page_loading_completed));